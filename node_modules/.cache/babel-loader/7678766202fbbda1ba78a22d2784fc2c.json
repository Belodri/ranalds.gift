{"ast":null,"code":"var _jsxFileName = \"C:\\\\dev\\\\ranalds.gift\\\\src\\\\components\\\\buildPage\\\\BuildInformation.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { AppContext } from \"../../stores/Store\";\nimport { auth, db } from \"../../utils/Firebase\";\n\nclass BuildInformation extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  handleLikeBuild() {\n    const [state, updateState] = this.context;\n\n    if (!auth.currentUser) {\n      console.log('Login to like a build.');\n      return;\n    }\n\n    db.collection('buildLikes').where('userId', '==', auth.currentUser.uid).where('buildId', '==', state.buildId).get().then(querySnapshot => {\n      if (querySnapshot.size > 0) {\n        console.log('Build like data found');\n        console.log(querySnapshot.docs[0].data());\n        var buildLikesDoc = querySnapshot.docs[0];\n        buildLikesDoc.ref.update({\n          likes: true\n        }).then(() => {\n          console.log('Successfully updated Like data for Build');\n          updateState({\n            type: \"UPDATE_LIKE_STATE\",\n            payload: true\n          });\n        }).catch(error => {\n          console.error('Error liking build:', error);\n        });\n      }\n    }).catch(error => {\n      console.error('Error getting data from BuildLikes table:', error);\n    });\n  }\n\n  handleUnlikeBuild() {\n    const [state, updateState] = this.context;\n\n    if (!auth.currentUser) {\n      console.log('Login to like a build.');\n      return;\n    }\n\n    db.collection('buildLikes').where('userId', '==', auth.currentUser.uid).where('buildId', '==', state.buildId).get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        console.log(doc.data());\n      });\n\n      if (querySnapshot.size > 0) {\n        console.log('Build like data found');\n        console.log(querySnapshot.docs[0].data());\n        var buildLikesDoc = querySnapshot.docs[0];\n        buildLikesDoc.ref.update({\n          likes: true\n        }).then(() => {\n          console.log('Successfully updated Like data for Build');\n          updateState({\n            type: \"UPDATE_LIKE_STATE\",\n            payload: false\n          });\n        }).catch(error => {\n          console.error('Error liking build:', error);\n        });\n      }\n    }).catch(error => {\n      console.error('Error getting data from BuildLikes table:', error);\n    });\n  }\n\n  render() {\n    const [state, updateState] = this.context;\n    auth.onAuthStateChanged(user => {\n      if (!user) {\n        return;\n      }\n\n      db.collection('buildLikes').where('userId', '==', user.uid).where('buildId', '==', state.buildId).get().then(querySnapshot => {\n        if (querySnapshot.size > 0) {\n          console.log('Build like data found');\n          updateState({\n            type: \"UPDATE_LIKE_STATE\",\n            payload: querySnapshot.docs[0].data().likes\n          });\n        }\n      }).catch(error => {\n        console.error('Error getting data from BuildLikes table:', error);\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"build-information-container read-only-container border-02 background-18\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 14\n      }\n    }, \"Created by\"), /*#__PURE__*/React.createElement(Link, {\n      to: '/user/' + state.userId + '/view',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 37\n      }\n    }, state.username)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 14\n      }\n    }, \"Patch\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 32\n      }\n    }, state.patch)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"build-like-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"material-icons like-icon\",\n      onClick: this.handleLikeBuild.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 43\n      }\n    }, \"star_border\"), /*#__PURE__*/React.createElement(\"i\", {\n      class: \"material-icons unlike-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 136\n      }\n    }, \"star\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 182\n      }\n    }, state.likes)));\n  }\n\n}\n\nBuildInformation.contextType = AppContext;\nexport default BuildInformation;","map":{"version":3,"sources":["C:/dev/ranalds.gift/src/components/buildPage/BuildInformation.js"],"names":["React","Component","Link","AppContext","auth","db","BuildInformation","constructor","props","handleLikeBuild","state","updateState","context","currentUser","console","log","collection","where","uid","buildId","get","then","querySnapshot","size","docs","data","buildLikesDoc","ref","update","likes","type","payload","catch","error","handleUnlikeBuild","forEach","doc","render","onAuthStateChanged","user","userId","username","patch","bind","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\r\nimport { Link } from \"react-router-dom\";\r\nimport { AppContext } from \"../../stores/Store\";\r\nimport { auth, db } from \"../../utils/Firebase\";\r\n\r\nclass BuildInformation extends Component {\r\n    static contextType = AppContext;\r\n    \r\n    constructor(props) {\r\n      super(props);\r\n    }\r\n\r\n    handleLikeBuild() {\r\n        const [state, updateState] = this.context;\r\n\r\n        if (!auth.currentUser) {\r\n            console.log('Login to like a build.');\r\n            return;\r\n        }\r\n\r\n        db.collection('buildLikes').where('userId', '==', auth.currentUser.uid).where('buildId', '==', state.buildId).get().then((querySnapshot) => {\r\n            if (querySnapshot.size > 0) {\r\n                console.log('Build like data found');\r\n                console.log(querySnapshot.docs[0].data());\r\n                var buildLikesDoc = querySnapshot.docs[0];\r\n                buildLikesDoc.ref.update({\r\n                    likes: true\r\n                }).then(() => {\r\n                    console.log('Successfully updated Like data for Build'); \r\n\r\n                    updateState({\r\n                        type: \"UPDATE_LIKE_STATE\", \r\n                        payload: true\r\n                    });\r\n                }).catch((error) => { \r\n                    console.error('Error liking build:', error); \r\n                });\r\n            }\r\n        }).catch((error) => {\r\n            console.error('Error getting data from BuildLikes table:', error);\r\n        });\r\n    }\r\n\r\n    handleUnlikeBuild() {\r\n        const [state, updateState] = this.context;\r\n\r\n        if (!auth.currentUser) {\r\n            console.log('Login to like a build.');\r\n            return;\r\n        }\r\n\r\n        db.collection('buildLikes').where('userId', '==', auth.currentUser.uid).where('buildId', '==', state.buildId).get().then((querySnapshot) => {\r\n            querySnapshot.forEach((doc) => {\r\n                console.log(doc.data());\r\n            });\r\n            if (querySnapshot.size > 0) {\r\n                console.log('Build like data found');\r\n                console.log(querySnapshot.docs[0].data());\r\n                var buildLikesDoc = querySnapshot.docs[0];\r\n                buildLikesDoc.ref.update({\r\n                    likes: true\r\n                }).then(() => {\r\n                    console.log('Successfully updated Like data for Build'); \r\n\r\n                    updateState({\r\n                        type: \"UPDATE_LIKE_STATE\", \r\n                        payload: false\r\n                    });\r\n                }).catch((error) => { \r\n                    console.error('Error liking build:', error); \r\n                });\r\n            }\r\n        }).catch((error) => {\r\n            console.error('Error getting data from BuildLikes table:', error);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const [state, updateState] = this.context;\r\n\r\n        auth.onAuthStateChanged((user) => {\r\n            if (!user) {\r\n                return;\r\n            }\r\n\r\n            db.collection('buildLikes').where('userId', '==', user.uid).where('buildId', '==', state.buildId).get().then((querySnapshot) => {\r\n                if (querySnapshot.size > 0) {\r\n                    console.log('Build like data found');\r\n\r\n                    updateState({\r\n                        type: \"UPDATE_LIKE_STATE\", \r\n                        payload: querySnapshot.docs[0].data().likes\r\n                    });\r\n                }\r\n            }).catch((error) => {\r\n                console.error('Error getting data from BuildLikes table:', error);\r\n            });\r\n\r\n        });\r\n\r\n        return (<div className=\"build-information-container read-only-container border-02 background-18\">\r\n        <div><span>Created by</span><Link to={'/user/' + state.userId + '/view'}>{state.username}</Link></div>\r\n        <div><span>Patch</span><span>{state.patch}</span></div>\r\n        <div class=\"build-like-container\"><i class=\"material-icons like-icon\" onClick={this.handleLikeBuild.bind(this)}>star_border</i><i class=\"material-icons unlike-icon\">star</i><span>{state.likes}</span></div>\r\n    </div>);\r\n    }\r\n}\r\n\r\nexport default BuildInformation;"]},"metadata":{},"sourceType":"module"}