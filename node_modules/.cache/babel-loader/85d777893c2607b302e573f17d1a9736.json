{"ast":null,"code":"var _jsxFileName = \"C:\\\\dev\\\\ranalds.gift\\\\src\\\\components\\\\buildPage\\\\EditBuildPage.js\";\nimport React, { Component, useContext } from 'react';\nimport HeroTalents from '../heroTalents/HeroTalents';\nimport BuildList from '../buildList/BuildList';\nimport Inventory from '../inventory/Inventory';\nimport './EditBuildPage.css';\nimport HeroDetails from '../heroDetails/HeroDetails';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport \"react-tabs/style/react-tabs.css\";\nimport BuildOptions from './BuildOptions';\nimport BuildSummary from './BuildSummary';\nimport { AppContext } from '../../stores/Store';\nimport HeroSelect from '../heroSelect/HeroSelect';\nimport { BuildPageContext } from '../../stores/BuildPageStore';\nimport { useParams, useRouteMatch } from 'react-router';\nimport { auth, db } from '../../utils/Firebase';\n\nfunction EditBuildPage() {\n  const [state, updateState] = useContext(AppContext);\n  const {\n    path\n  } = useRouteMatch();\n  let params = useParams();\n  console.log('params build id: ' + params.buildId);\n  var root = document.getElementById('root');\n  root.dataset.pageName = 'editBuildPage';\n\n  if (params.buildId) {\n    loadBuild(params.buildId);\n  }\n\n  function loadBuild(buildId) {\n    console.log('loading build id ' + buildId);\n    /*             updateState({\r\n                    type: 'INIT_STATE_FROM_DATA', \r\n                    payload: {}\r\n                }); */\n  }\n\n  function saveBuild() {\n    if (!auth) {\n      alert('Can\\'t save or create builds when not authenticated.');\n      return;\n    }\n\n    console.log('saving build to database build id ' + buildId);\n\n    if (state.buildId == 0) {\n      //creating new build then forward to build edit page\n      alert('creating new build');\n      return;\n      db.collection('builds').add({\n        careerId: 1,\n        meleeId: state.meleeId,\n        meleeProperty1: state.properties[0],\n        meleeProperty2: state.properties[1],\n        meleeTrait: state.trait[0],\n        rangeId: state.rangeId,\n        rangeProperty1: state.properties[2],\n        rangeProperty2: state.properties[3],\n        rangeTrait: state.trait[1],\n        necklaceProperty1: state.properties[4],\n        necklaceProperty2: state.properties[5],\n        necklaceTrait: state.trait[2],\n        charmProperty1: state.properties[6],\n        charmProperty2: state.properties[7],\n        charmTrait: state.trait[3],\n        trinketProperty1: state.properties[8],\n        trinketProperty2: state.properties[9],\n        trinketTrait: state.trait[4],\n        talent1: state.talents[0],\n        talent2: state.talents[1],\n        talent3: state.talents[2],\n        talent4: state.talents[3],\n        talent5: state.talents[4],\n        talent6: state.talents[5],\n        description: state.description,\n        difficulty: state.difficulty,\n        mission: state.mission,\n        potion: state.potion,\n        roles: state.roles,\n        likes: 0,\n        dateCreated: new Date(),\n        dateModified: new Date(),\n        userId: auth.currentUser.uid,\n        username: auth.currentUser.displayName,\n        videos: state.videos\n      }).then(docRef => {\n        console.log(\"Document written with ID: \", docRef.id); //redirect to build edit page here\n      }).catch(error => {\n        console.error(\"Error adding document: \", error);\n      });\n    } else {\n      let buildData = db.collection('builds').doc(state.buildId);\n      alert('updating build');\n      return;\n      buildData.update({}).then(docRef => {\n        console.log(\"Document updated with ID: \", docRef.id);\n      }).catch(error => {\n        console.error(\"Error updating document: \", error);\n      });\n    } //updateState({type: 'SAVE_BUILD', payload: '0'});\n\n  } //get build id param\n  //if empty, load nothing from DB\n  //if not empty, load build from DB and updatestate\n  //saving builds with /create/ url saves new db item and redirects to /buildId/edit page\n  //saving builds with /edit/ url just updates the record in the db\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-build-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"build-left-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"build-group-buttons-container\",\n    onClick: saveBuild.bind(this),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, \"Save Build\")), /*#__PURE__*/React.createElement(HeroSelect, {\n    careerId: state.careerId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"build-main-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TabList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }, \"Summary\"), /*#__PURE__*/React.createElement(Tab, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, \"Videos\"), /*#__PURE__*/React.createElement(Tab, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 29\n    }\n  }, \"Combos\")), /*#__PURE__*/React.createElement(TabPanel, {\n    className: \"build-summary-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"build-details-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(HeroDetails, {\n    careerId: state.careerId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"input-build-description\",\n    wrap: \"hard\",\n    placeholder: \"Describe your build\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(BuildOptions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(BuildSummary, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(TabPanel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"build-additional-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(TabPanel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hero-abilities\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"build-talents-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(HeroTalents, {\n    contextActionType: \"UPDATE_TALENTS\",\n    careerId: state.careerId,\n    talents: state.talents,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"build-right-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Inventory, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  })));\n}\n\nexport default EditBuildPage;","map":{"version":3,"sources":["C:/dev/ranalds.gift/src/components/buildPage/EditBuildPage.js"],"names":["React","Component","useContext","HeroTalents","BuildList","Inventory","HeroDetails","Tab","Tabs","TabList","TabPanel","BuildOptions","BuildSummary","AppContext","HeroSelect","BuildPageContext","useParams","useRouteMatch","auth","db","EditBuildPage","state","updateState","path","params","console","log","buildId","root","document","getElementById","dataset","pageName","loadBuild","saveBuild","alert","collection","add","careerId","meleeId","meleeProperty1","properties","meleeProperty2","meleeTrait","trait","rangeId","rangeProperty1","rangeProperty2","rangeTrait","necklaceProperty1","necklaceProperty2","necklaceTrait","charmProperty1","charmProperty2","charmTrait","trinketProperty1","trinketProperty2","trinketTrait","talent1","talents","talent2","talent3","talent4","talent5","talent6","description","difficulty","mission","potion","roles","likes","dateCreated","Date","dateModified","userId","currentUser","uid","username","displayName","videos","then","docRef","id","catch","error","buildData","doc","update","bind"],"mappings":"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","sourcesContent":["import React, {Component, useContext} from 'react';\r\nimport HeroTalents from '../heroTalents/HeroTalents'\r\nimport BuildList from '../buildList/BuildList'\r\nimport Inventory from '../inventory/Inventory'\r\nimport './EditBuildPage.css';\r\nimport HeroDetails from '../heroDetails/HeroDetails';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport \"react-tabs/style/react-tabs.css\";\r\nimport BuildOptions from './BuildOptions';\r\nimport BuildSummary from './BuildSummary';\r\nimport { AppContext } from '../../stores/Store';\r\nimport HeroSelect from '../heroSelect/HeroSelect';\r\nimport { BuildPageContext } from '../../stores/BuildPageStore';\r\nimport { useParams, useRouteMatch } from 'react-router';\r\nimport { auth, db } from '../../utils/Firebase';\r\n\r\nfunction EditBuildPage() {\r\n        const [state, updateState] = useContext(AppContext);\r\n\r\n        const { path } = useRouteMatch();\r\n        let params = useParams();\r\n    \r\n        console.log('params build id: ' + params.buildId);\r\n\r\n        var root = document.getElementById('root');\r\n        root.dataset.pageName = 'editBuildPage';\r\n\r\n        if (params.buildId) {\r\n            loadBuild(params.buildId);\r\n        }\r\n\r\n        function loadBuild(buildId) {\r\n            console.log('loading build id ' + buildId);\r\n/*             updateState({\r\n                type: 'INIT_STATE_FROM_DATA', \r\n                payload: {}\r\n            }); */\r\n        }\r\n\r\n        function saveBuild() {\r\n            if (!auth) {\r\n                alert('Can\\'t save or create builds when not authenticated.');\r\n                return;\r\n            }\r\n\r\n            console.log('saving build to database build id ' + buildId);\r\n            if (state.buildId == 0) {\r\n                //creating new build then forward to build edit page\r\n\r\n                alert('creating new build');\r\n                return;\r\n\r\n                db.collection('builds').add({\r\n                    careerId: 1,\r\n                    meleeId: state.meleeId,\r\n                    meleeProperty1: state.properties[0],\r\n                    meleeProperty2:state.properties[1],\r\n                    meleeTrait: state.trait[0],\r\n                    rangeId: state.rangeId,\r\n                    rangeProperty1: state.properties[2],\r\n                    rangeProperty2: state.properties[3],\r\n                    rangeTrait: state.trait[1],\r\n                    necklaceProperty1: state.properties[4],\r\n                    necklaceProperty2: state.properties[5],\r\n                    necklaceTrait: state.trait[2],\r\n                    charmProperty1: state.properties[6],\r\n                    charmProperty2: state.properties[7],\r\n                    charmTrait: state.trait[3],\r\n                    trinketProperty1: state.properties[8],\r\n                    trinketProperty2: state.properties[9],\r\n                    trinketTrait: state.trait[4],\r\n                    talent1: state.talents[0],\r\n                    talent2: state.talents[1],\r\n                    talent3: state.talents[2],\r\n                    talent4: state.talents[3],\r\n                    talent5: state.talents[4],\r\n                    talent6: state.talents[5],\r\n                    description: state.description,\r\n                    difficulty: state.difficulty,\r\n                    mission: state.mission,\r\n                    potion: state.potion,\r\n                    roles: state.roles,\r\n                    likes: 0,\r\n                    dateCreated: new Date(),\r\n                    dateModified: new Date(),\r\n                    userId: auth.currentUser.uid,\r\n                    username: auth.currentUser.displayName,\r\n                    videos: state.videos\r\n                }).then((docRef) => {\r\n                    console.log(\"Document written with ID: \", docRef.id);\r\n\r\n                    //redirect to build edit page here\r\n\r\n                }).catch((error) => {\r\n                    console.error(\"Error adding document: \", error);\r\n                });\r\n            }\r\n            else {\r\n\r\n                let buildData = db.collection('builds').doc(state.buildId);\r\n\r\n                alert('updating build');\r\n                return;\r\n\r\n                buildData.update({\r\n\r\n                }).then((docRef) => {\r\n                    console.log(\"Document updated with ID: \", docRef.id);\r\n                }).catch((error) => {\r\n                    console.error(\"Error updating document: \", error);\r\n                });\r\n            }\r\n            //updateState({type: 'SAVE_BUILD', payload: '0'});\r\n        }\r\n\r\n        //get build id param\r\n        //if empty, load nothing from DB\r\n        //if not empty, load build from DB and updatestate\r\n\r\n        //saving builds with /create/ url saves new db item and redirects to /buildId/edit page\r\n        //saving builds with /edit/ url just updates the record in the db\r\n\r\n        return (\r\n            <div className=\"edit-build-page\">\r\n                <div className=\"build-left-container\">\r\n                    <div className=\"build-group-buttons-container\" onClick={saveBuild.bind(this)}>\r\n                        <p>Save Build</p>\r\n                    </div>                    \r\n                    <HeroSelect careerId={state.careerId}></HeroSelect>\r\n                </div>\r\n                <div className=\"build-main-container\">\r\n                    <Tabs>\r\n                        <TabList>\r\n                            <Tab>Summary</Tab>\r\n                            <Tab>Videos</Tab>\r\n                            <Tab>Combos</Tab>                        \r\n                        </TabList>\r\n                        <TabPanel className=\"build-summary-tab\">\r\n                            <div className=\"build-details-container\">\r\n                                <HeroDetails careerId={state.careerId}></HeroDetails>\r\n                                <textarea className=\"input-build-description\" wrap=\"hard\" placeholder=\"Describe your build\"></textarea>\r\n                                <BuildOptions></BuildOptions>\r\n                            </div>\r\n                            <BuildSummary></BuildSummary>\r\n                        </TabPanel>\r\n                        <TabPanel>\r\n                            <div className=\"build-additional-info\">\r\n                            </div>\r\n                        </TabPanel>\r\n                        <TabPanel>\r\n                            <div className=\"hero-abilities\">\r\n                            </div>                        \r\n                        </TabPanel>\r\n                    </Tabs>\r\n                    <div className=\"build-talents-container\">\r\n                        <HeroTalents contextActionType=\"UPDATE_TALENTS\" careerId={state.careerId} talents={state.talents}></HeroTalents>\r\n                    </div>\r\n                </div>\r\n                <div className=\"build-right-container\">\r\n                    <Inventory></Inventory>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\nexport default EditBuildPage;"]},"metadata":{},"sourceType":"module"}