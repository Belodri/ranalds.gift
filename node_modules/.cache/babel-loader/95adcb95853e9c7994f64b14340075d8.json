{"ast":null,"code":"import _slicedToArray from\"C:\\\\dev\\\\New folder\\\\rg\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext}from'react';import HeroTalents from'../heroTalents/HeroTalents';import Inventory from'../inventory/Inventory';import'./EditBuildPage.css';import HeroDetails from'../heroDetails/HeroDetails';import{Tab,Tabs,TabList,TabPanel}from'react-tabs';import\"react-tabs/style/react-tabs.css\";import BuildOptions from'./BuildOptions';import BuildSummary from'./BuildSummary';import{AppContext}from'../../stores/Store';import HeroSelect from'../heroSelect/HeroSelect';import{useParams,useRouteMatch}from'react-router';import{auth,db}from'../../utils/Firebase';import*as Constants from'../../data/Constants';import history from'../../utils/History';import{UserContext}from'../../stores/UserStore';import{Link}from'react-router-dom';import BuildInformation from'./BuildInformation';function EditBuildPage(){var _useContext=useContext(AppContext),_useContext2=_slicedToArray(_useContext,2),state=_useContext2[0],updateState=_useContext2[1];var userState=useContext(UserContext);var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path;var paths=path.split('/');var currentPath=paths[paths.length-1];console.log('current path '+currentPath);if(currentPath==='edit'){if(state.readonly){updateState({type:\"UPDATE_READONLY\",payload:false});}}else if(currentPath==='view'){if(!state.readonly){updateState({type:\"UPDATE_READONLY\",payload:true});}}else if(currentPath==='create'){if(!state.createBuild){updateState({type:\"UPDATE_CREATE_BUILD_STATE\",payload:true});}}var params=useParams();console.log(!userState.userId);/*         if (!userState.userId || userState.userId == '') {\r\n            console.log('props.userId');\r\n            return <div className=\"error-message\">Error loading build for edit</div>;\r\n        }  */console.log('params build id: '+params.buildId);//console.log(PatchList[0]);\nvar root=document.getElementById('root');root.dataset.pageName='editBuildPage';if(params.buildId&&state.buildId!==params.buildId){loadBuild(params.buildId);}function loadBuild(buildId){console.log('loading build id '+buildId);if(state.buildId!==buildId){state.buildId=buildId;}db.collection('builds').doc(buildId).get().then(function(build){if(!build.data()){console.log('No build found with ID '+buildId);//history.push('/build/create');\n//update state to indicate no build available in DB\nreturn;}console.log('build loaded from db:');console.log(build.data());updateState({type:'INIT_STATE_FROM_DATA',payload:build});}).catch(function(error){console.error('Error retrieving data from DB:',error);});}function handleDescriptionChanged(e){updateState({type:\"UPDATE_DESCRIPTION\",payload:e.currentTarget.value});}function handleNameChange(e){updateState({type:\"UPDATE_NAME\",payload:e.currentTarget.value});}function saveBuild(){if(!auth.currentUser){alert('Can\\'t save or create builds when not authenticated.');return;}if(!state.dirty){console.log('Not saving build, no changes have been made.');return;}console.log('saving build to database build id '+state.buildId+' for user id '+auth.currentUser.uid);if(state.buildId===0){//creating new build then forward to build edit page\nalert('creating new build');db.collection('builds').add({careerId:state.careerId,meleeId:state.meleeId,meleeProperty1:state.properties[Constants.MELEE_PROPERTY1_INDEX],meleeProperty2:state.properties[Constants.MELEE_PROPERTY2_INDEX],meleeTrait:state.traits[Constants.MELEE_TRAIT_INDEX],rangeId:state.rangeId,rangeProperty1:state.properties[Constants.RANGE_PROPERTY1_INDEX],rangeProperty2:state.properties[Constants.RANGE_PROPERTY2_INDEX],rangeTrait:state.traits[Constants.RANGE_TRAIT_INDEX],necklaceProperty1:state.properties[Constants.NECKLACE_PROPERTY1_INDEX],necklaceProperty2:state.properties[Constants.NECKLACE_PROPERTY2_INDEX],necklaceTrait:state.traits[Constants.NECKLACE_TRAIT_INDEX],charmProperty1:state.properties[Constants.CHARM_PROPERTY1_INDEX],charmProperty2:state.properties[Constants.CHARM_PROPERTY2_INDEX],charmTrait:state.traits[Constants.CHARM_TRAIT_INDEX],trinketProperty1:state.properties[Constants.TRINKET_PROPERTY1_INDEX],trinketProperty2:state.properties[Constants.TRINKET_PROPERTY2_INDEX],trinketTrait:state.traits[Constants.TRINKET_TRAIT_INDEX],talent1:state.talents[Constants.TALENT_TIER_1],talent2:state.talents[Constants.TALENT_TIER_2],talent3:state.talents[Constants.TALENT_TIER_3],talent4:state.talents[Constants.TALENT_TIER_4],talent5:state.talents[Constants.TALENT_TIER_5],talent6:state.talents[Constants.TALENT_TIER_6],name:state.name,description:state.description,difficulty:state.difficulty,mission:state.mission,potion:state.potion,roles:state.roles,likes:[],dateCreated:new Date(),dateModified:new Date(),userId:auth.currentUser.uid,username:auth.currentUser.displayName,videos:state.videos}).then(function(docRef){console.log(\"Document written with ID: \",docRef.id);history.push('/build/'+docRef.id+'/edit');//redirect to build edit page here\n}).catch(function(error){console.error(\"Error adding document: \",error);});}else{console.log('updating build, current state:');console.log(state);if(state.userId!==auth.currentUser.uid){alert('You can\\'t edit a build you didn\\'t create.');return;}var buildDataRef=db.collection('builds').doc(state.buildId);buildDataRef.update({careerId:state.careerId,meleeId:state.meleeId,meleeProperty1:state.properties[Constants.MELEE_PROPERTY1_INDEX],meleeProperty2:state.properties[Constants.MELEE_PROPERTY2_INDEX],meleeTrait:state.traits[Constants.MELEE_TRAIT_INDEX],rangeId:state.rangeId,rangeProperty1:state.properties[Constants.RANGE_PROPERTY1_INDEX],rangeProperty2:state.properties[Constants.RANGE_PROPERTY2_INDEX],rangeTrait:state.traits[Constants.RANGE_TRAIT_INDEX],necklaceProperty1:state.properties[Constants.NECKLACE_PROPERTY1_INDEX],necklaceProperty2:state.properties[Constants.NECKLACE_PROPERTY2_INDEX],necklaceTrait:state.traits[Constants.NECKLACE_TRAIT_INDEX],charmProperty1:state.properties[Constants.CHARM_PROPERTY1_INDEX],charmProperty2:state.properties[Constants.CHARM_PROPERTY2_INDEX],charmTrait:state.traits[Constants.CHARM_TRAIT_INDEX],trinketProperty1:state.properties[Constants.TRINKET_PROPERTY1_INDEX],trinketProperty2:state.properties[Constants.TRINKET_PROPERTY2_INDEX],trinketTrait:state.traits[Constants.TRINKET_TRAIT_INDEX],talent1:state.talents[Constants.TALENT_TIER_1],talent2:state.talents[Constants.TALENT_TIER_2],talent3:state.talents[Constants.TALENT_TIER_3],talent4:state.talents[Constants.TALENT_TIER_4],talent5:state.talents[Constants.TALENT_TIER_5],talent6:state.talents[Constants.TALENT_TIER_6],name:state.name,description:state.description,difficulty:state.difficulty,mission:state.mission,potion:state.potion,roles:state.roles,likes:state.likes,dateModified:new Date(),userId:auth.currentUser.uid,username:auth.currentUser.displayName,videos:state.videos}).then(function(){console.log(\"Document updated with ID: \",state.buildId);updateState({type:\"UPDATE_DIRTY\",payload:false});var buildSaveIndicator=document.getElementById('buildSaveIndicator');buildSaveIndicator.classList.add('saved');setTimeout(function(){buildSaveIndicator.classList.remove('saved');},4000);}).catch(function(error){console.error(\"Error updating document: \",error);});}}//get build id param\n//if empty, load nothing from DB\n//if not empty, load build from DB and updatestate\n//saving builds with /create/ url saves new db item and redirects to /buildId/edit page\n//saving builds with /edit/ url just updates the record in the db\nif(!state.isFromDb&&!state.createBuild){return/*#__PURE__*/React.createElement(\"div\",{className:\"edit-build-page\",\"data-readonly\":state.readonly,\"data-dirty\":state.dirty},/*#__PURE__*/React.createElement(\"p\",null,\"No build found\"));}if(!auth.currentUser){return/*#__PURE__*/React.createElement(\"div\",{className:\"edit-build-page\",\"data-readonly\":state.readonly,\"data-dirty\":state.dirty},/*#__PURE__*/React.createElement(\"p\",null,\"You must be logged in to edit builds\"));}if(!state.createBuild&&state.userId!==auth.currentUser.uid){return/*#__PURE__*/React.createElement(\"div\",{className:\"edit-build-page\",\"data-readonly\":state.readonly,\"data-dirty\":state.dirty},/*#__PURE__*/React.createElement(\"p\",null,\"Cannot edit build that you didn't create\"));}return/*#__PURE__*/React.createElement(\"div\",{className:\"edit-build-page build-page\",\"data-liked\":state.isLiked,\"data-readonly\":state.readonly,\"data-dirty\":state.dirty,\"data-fresh\":state.createBuild},/*#__PURE__*/React.createElement(\"span\",{id:\"buildSaveIndicator\",className:\"border-03 background-18\"},\"Build saved...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"build-left-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"build-buttons-container\"},/*#__PURE__*/React.createElement(\"span\",{id:\"saveBuildButton\",className:\"button-01 border-04\",onClick:saveBuild.bind(this)},\"Save Build\")),/*#__PURE__*/React.createElement(HeroSelect,{careerId:state.careerId})),/*#__PURE__*/React.createElement(\"div\",{className:\"build-main-container\"},/*#__PURE__*/React.createElement(Tabs,null,/*#__PURE__*/React.createElement(TabList,null,/*#__PURE__*/React.createElement(Tab,null,\"Summary\"),/*#__PURE__*/React.createElement(Tab,null,\"Videos\"),/*#__PURE__*/React.createElement(Tab,null,\"Combos\")),/*#__PURE__*/React.createElement(TabPanel,{className:\"build-summary-tab\"},/*#__PURE__*/React.createElement(\"div\",{className:\"build-details-container\"},/*#__PURE__*/React.createElement(HeroDetails,{careerId:state.careerId}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"build-name-input border-02 background-18\",placeholder:\"Name your build\",value:state.name,onChange:handleNameChange.bind(this)}),/*#__PURE__*/React.createElement(\"textarea\",{className:\"input-build-description border-02 background-18\",wrap:\"hard\",placeholder:\"Describe your build\",value:state.description,onChange:handleDescriptionChanged.bind(this)}),/*#__PURE__*/React.createElement(BuildInformation,null),/*#__PURE__*/React.createElement(BuildOptions,null)),/*#__PURE__*/React.createElement(BuildSummary,null)),/*#__PURE__*/React.createElement(TabPanel,null,/*#__PURE__*/React.createElement(\"div\",{className:\"build-additional-info\"})),/*#__PURE__*/React.createElement(TabPanel,null,/*#__PURE__*/React.createElement(\"div\",{className:\"hero-abilities\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"build-talents-container\"},/*#__PURE__*/React.createElement(HeroTalents,{contextActionType:\"UPDATE_TALENTS\",careerId:state.careerId,talents:state.talents}))),/*#__PURE__*/React.createElement(\"div\",{className:\"build-right-container\"},/*#__PURE__*/React.createElement(Inventory,null)));}export default EditBuildPage;","map":{"version":3,"sources":["C:/dev/New folder/rg/src/components/buildPage/EditBuildPage.js"],"names":["React","useContext","HeroTalents","Inventory","HeroDetails","Tab","Tabs","TabList","TabPanel","BuildOptions","BuildSummary","AppContext","HeroSelect","useParams","useRouteMatch","auth","db","Constants","history","UserContext","Link","BuildInformation","EditBuildPage","state","updateState","userState","path","paths","split","currentPath","length","console","log","readonly","type","payload","createBuild","params","userId","buildId","root","document","getElementById","dataset","pageName","loadBuild","collection","doc","get","then","build","data","catch","error","handleDescriptionChanged","e","currentTarget","value","handleNameChange","saveBuild","currentUser","alert","dirty","uid","add","careerId","meleeId","meleeProperty1","properties","MELEE_PROPERTY1_INDEX","meleeProperty2","MELEE_PROPERTY2_INDEX","meleeTrait","traits","MELEE_TRAIT_INDEX","rangeId","rangeProperty1","RANGE_PROPERTY1_INDEX","rangeProperty2","RANGE_PROPERTY2_INDEX","rangeTrait","RANGE_TRAIT_INDEX","necklaceProperty1","NECKLACE_PROPERTY1_INDEX","necklaceProperty2","NECKLACE_PROPERTY2_INDEX","necklaceTrait","NECKLACE_TRAIT_INDEX","charmProperty1","CHARM_PROPERTY1_INDEX","charmProperty2","CHARM_PROPERTY2_INDEX","charmTrait","CHARM_TRAIT_INDEX","trinketProperty1","TRINKET_PROPERTY1_INDEX","trinketProperty2","TRINKET_PROPERTY2_INDEX","trinketTrait","TRINKET_TRAIT_INDEX","talent1","talents","TALENT_TIER_1","talent2","TALENT_TIER_2","talent3","TALENT_TIER_3","talent4","TALENT_TIER_4","talent5","TALENT_TIER_5","talent6","TALENT_TIER_6","name","description","difficulty","mission","potion","roles","likes","dateCreated","Date","dateModified","username","displayName","videos","docRef","id","push","buildDataRef","update","buildSaveIndicator","classList","setTimeout","remove","isFromDb","isLiked","bind"],"mappings":"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","sourcesContent":["import React, {useContext} from 'react';\r\nimport HeroTalents from '../heroTalents/HeroTalents'\r\nimport Inventory from '../inventory/Inventory'\r\nimport './EditBuildPage.css';\r\nimport HeroDetails from '../heroDetails/HeroDetails';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport \"react-tabs/style/react-tabs.css\";\r\nimport BuildOptions from './BuildOptions';\r\nimport BuildSummary from './BuildSummary';\r\nimport { AppContext } from '../../stores/Store';\r\nimport HeroSelect from '../heroSelect/HeroSelect';\r\nimport { useParams, useRouteMatch } from 'react-router';\r\nimport { auth, db } from '../../utils/Firebase';\r\nimport * as Constants from '../../data/Constants';\r\nimport history from '../../utils/History';\r\nimport { UserContext } from '../../stores/UserStore';\r\nimport { Link } from 'react-router-dom';\r\nimport BuildInformation from './BuildInformation';\r\n\r\nfunction EditBuildPage() {\r\n\r\n        const [state, updateState] = useContext(AppContext);\r\n        const userState = useContext(UserContext);\r\n\r\n        const { path } = useRouteMatch();\r\n        var paths = path.split('/');\r\n\r\n        var currentPath = paths[paths.length-1];\r\n        console.log('current path ' + currentPath);\r\n\r\n        if (currentPath === 'edit') {\r\n            if (state.readonly) {\r\n                updateState({\r\n                    type: \"UPDATE_READONLY\", \r\n                    payload: false\r\n                });\r\n            }\r\n        } \r\n        else if (currentPath === 'view') {\r\n            if (!state.readonly) {\r\n                updateState({\r\n                    type: \"UPDATE_READONLY\", \r\n                    payload: true\r\n                });\r\n            }\r\n        }\r\n        else if (currentPath === 'create') {\r\n            if (!state.createBuild) {\r\n                updateState({\r\n                    type: \"UPDATE_CREATE_BUILD_STATE\",\r\n                    payload: true\r\n                });\r\n            }\r\n        }\r\n\r\n        let params = useParams();\r\n\r\n        console.log(!userState.userId);\r\n\r\n/*         if (!userState.userId || userState.userId == '') {\r\n            console.log('props.userId');\r\n            return <div className=\"error-message\">Error loading build for edit</div>;\r\n        }  */\r\n    \r\n        console.log('params build id: ' + params.buildId);\r\n        //console.log(PatchList[0]);\r\n\r\n        var root = document.getElementById('root');\r\n        root.dataset.pageName = 'editBuildPage';\r\n\r\n        if (params.buildId && state.buildId !== params.buildId) {\r\n            loadBuild(params.buildId);\r\n        }\r\n\r\n        function loadBuild(buildId) {\r\n            console.log('loading build id ' + buildId);\r\n            if (state.buildId !== buildId) {\r\n                state.buildId = buildId;\r\n            }\r\n\r\n            db.collection('builds').doc(buildId).get().then((build) => {\r\n                if (!build.data()) {\r\n                    console.log('No build found with ID ' + buildId);\r\n                    //history.push('/build/create');\r\n\r\n                    //update state to indicate no build available in DB\r\n                    return;\r\n                }\r\n\r\n                console.log('build loaded from db:');\r\n                console.log(build.data());\r\n\r\n                updateState({\r\n                    type: 'INIT_STATE_FROM_DATA', \r\n                    payload: build\r\n                });\r\n            }).catch((error) => {\r\n                console.error('Error retrieving data from DB:', error);\r\n            });\r\n\r\n        }\r\n\r\n        function handleDescriptionChanged(e) {\r\n            updateState({\r\n                type: \"UPDATE_DESCRIPTION\", \r\n                payload: e.currentTarget.value\r\n            });\r\n        }\r\n\r\n        function handleNameChange(e) {\r\n            updateState({\r\n                type: \"UPDATE_NAME\", \r\n                payload: e.currentTarget.value\r\n            });\r\n        }\r\n\r\n        function saveBuild() {\r\n            if (!auth.currentUser) {\r\n                alert('Can\\'t save or create builds when not authenticated.');\r\n                return;\r\n            }\r\n\r\n            if (!state.dirty) {\r\n                console.log('Not saving build, no changes have been made.');\r\n                return;\r\n            }\r\n\r\n            console.log('saving build to database build id ' + state.buildId + ' for user id ' + auth.currentUser.uid);\r\n\r\n            if (state.buildId === 0) {\r\n                //creating new build then forward to build edit page\r\n\r\n                alert('creating new build');\r\n\r\n                db.collection('builds').add({\r\n                    careerId: state.careerId,\r\n                    meleeId: state.meleeId,\r\n                    meleeProperty1: state.properties[Constants.MELEE_PROPERTY1_INDEX],\r\n                    meleeProperty2:state.properties[Constants.MELEE_PROPERTY2_INDEX],\r\n                    meleeTrait: state.traits[Constants.MELEE_TRAIT_INDEX],\r\n                    rangeId: state.rangeId,\r\n                    rangeProperty1: state.properties[Constants.RANGE_PROPERTY1_INDEX],\r\n                    rangeProperty2: state.properties[Constants.RANGE_PROPERTY2_INDEX],\r\n                    rangeTrait: state.traits[Constants.RANGE_TRAIT_INDEX],\r\n                    necklaceProperty1: state.properties[Constants.NECKLACE_PROPERTY1_INDEX],\r\n                    necklaceProperty2: state.properties[Constants.NECKLACE_PROPERTY2_INDEX],\r\n                    necklaceTrait: state.traits[Constants.NECKLACE_TRAIT_INDEX],\r\n                    charmProperty1: state.properties[Constants.CHARM_PROPERTY1_INDEX],\r\n                    charmProperty2: state.properties[Constants.CHARM_PROPERTY2_INDEX],\r\n                    charmTrait: state.traits[Constants.CHARM_TRAIT_INDEX],\r\n                    trinketProperty1: state.properties[Constants.TRINKET_PROPERTY1_INDEX],\r\n                    trinketProperty2: state.properties[Constants.TRINKET_PROPERTY2_INDEX],\r\n                    trinketTrait: state.traits[Constants.TRINKET_TRAIT_INDEX],\r\n                    talent1: state.talents[Constants.TALENT_TIER_1],\r\n                    talent2: state.talents[Constants.TALENT_TIER_2],\r\n                    talent3: state.talents[Constants.TALENT_TIER_3],\r\n                    talent4: state.talents[Constants.TALENT_TIER_4],\r\n                    talent5: state.talents[Constants.TALENT_TIER_5],\r\n                    talent6: state.talents[Constants.TALENT_TIER_6],\r\n                    name: state.name,\r\n                    description: state.description,\r\n                    difficulty: state.difficulty,\r\n                    mission: state.mission,\r\n                    potion: state.potion,\r\n                    roles: state.roles,\r\n                    likes: [],\r\n                    dateCreated: new Date(),\r\n                    dateModified: new Date(),\r\n                    userId: auth.currentUser.uid,\r\n                    username: auth.currentUser.displayName,\r\n                    videos: state.videos\r\n                }).then((docRef) => {\r\n                    console.log(\"Document written with ID: \", docRef.id);\r\n                    history.push('/build/' + docRef.id + '/edit');\r\n\r\n                    //redirect to build edit page here\r\n\r\n                }).catch((error) => {\r\n                    console.error(\"Error adding document: \", error);\r\n                });\r\n            }\r\n            else {\r\n\r\n                console.log('updating build, current state:');\r\n                console.log(state);\r\n\r\n                if (state.userId !== auth.currentUser.uid) {\r\n                    alert('You can\\'t edit a build you didn\\'t create.');\r\n                    return;\r\n                }\r\n\r\n                let buildDataRef = db.collection('builds').doc(state.buildId);\r\n\r\n                buildDataRef.update({\r\n                    careerId: state.careerId,\r\n                    meleeId: state.meleeId,\r\n                    meleeProperty1: state.properties[Constants.MELEE_PROPERTY1_INDEX],\r\n                    meleeProperty2:state.properties[Constants.MELEE_PROPERTY2_INDEX],\r\n                    meleeTrait: state.traits[Constants.MELEE_TRAIT_INDEX],\r\n                    rangeId: state.rangeId,\r\n                    rangeProperty1: state.properties[Constants.RANGE_PROPERTY1_INDEX],\r\n                    rangeProperty2: state.properties[Constants.RANGE_PROPERTY2_INDEX],\r\n                    rangeTrait: state.traits[Constants.RANGE_TRAIT_INDEX],\r\n                    necklaceProperty1: state.properties[Constants.NECKLACE_PROPERTY1_INDEX],\r\n                    necklaceProperty2: state.properties[Constants.NECKLACE_PROPERTY2_INDEX],\r\n                    necklaceTrait: state.traits[Constants.NECKLACE_TRAIT_INDEX],\r\n                    charmProperty1: state.properties[Constants.CHARM_PROPERTY1_INDEX],\r\n                    charmProperty2: state.properties[Constants.CHARM_PROPERTY2_INDEX],\r\n                    charmTrait: state.traits[Constants.CHARM_TRAIT_INDEX],\r\n                    trinketProperty1: state.properties[Constants.TRINKET_PROPERTY1_INDEX],\r\n                    trinketProperty2: state.properties[Constants.TRINKET_PROPERTY2_INDEX],\r\n                    trinketTrait: state.traits[Constants.TRINKET_TRAIT_INDEX],\r\n                    talent1: state.talents[Constants.TALENT_TIER_1],\r\n                    talent2: state.talents[Constants.TALENT_TIER_2],\r\n                    talent3: state.talents[Constants.TALENT_TIER_3],\r\n                    talent4: state.talents[Constants.TALENT_TIER_4],\r\n                    talent5: state.talents[Constants.TALENT_TIER_5],\r\n                    talent6: state.talents[Constants.TALENT_TIER_6],\r\n                    name: state.name,\r\n                    description: state.description,\r\n                    difficulty: state.difficulty,\r\n                    mission: state.mission,\r\n                    potion: state.potion,\r\n                    roles: state.roles,\r\n                    likes: state.likes,\r\n                    dateModified: new Date(),\r\n                    userId: auth.currentUser.uid,\r\n                    username: auth.currentUser.displayName,\r\n                    videos: state.videos    \r\n                }).then(() => {\r\n                    console.log(\"Document updated with ID: \", state.buildId);\r\n                    \r\n                    updateState({\r\n                        type: \"UPDATE_DIRTY\", \r\n                        payload: false\r\n                    });\r\n\r\n                    var buildSaveIndicator = document.getElementById('buildSaveIndicator');\r\n                    buildSaveIndicator.classList.add('saved');\r\n                    setTimeout(() => { buildSaveIndicator.classList.remove('saved'); }, 4000);\r\n\r\n                }).catch((error) => {\r\n                    console.error(\"Error updating document: \", error);\r\n                });\r\n            }\r\n        }\r\n\r\n        //get build id param\r\n        //if empty, load nothing from DB\r\n        //if not empty, load build from DB and updatestate\r\n\r\n        //saving builds with /create/ url saves new db item and redirects to /buildId/edit page\r\n        //saving builds with /edit/ url just updates the record in the db\r\n\r\n        if (!state.isFromDb && !state.createBuild) {\r\n            return (\r\n                <div className=\"edit-build-page\" data-readonly={state.readonly} data-dirty={state.dirty}>\r\n                    <p>No build found</p>\r\n                </div>);\r\n        }\r\n\r\n        if (!auth.currentUser) {\r\n            return (\r\n                <div className=\"edit-build-page\" data-readonly={state.readonly} data-dirty={state.dirty}>\r\n                    <p>You must be logged in to edit builds</p>\r\n                </div>);\r\n        }\r\n\r\n        if (!state.createBuild && state.userId !== auth.currentUser.uid) {\r\n            return (\r\n                <div className=\"edit-build-page\" data-readonly={state.readonly} data-dirty={state.dirty}>\r\n                    <p>Cannot edit build that you didn't create</p>\r\n                </div>);\r\n        }\r\n\r\n        return (\r\n            <div className=\"edit-build-page build-page\" data-liked={state.isLiked} data-readonly={state.readonly} data-dirty={state.dirty} data-fresh={state.createBuild}>\r\n                <span id=\"buildSaveIndicator\" className=\"border-03 background-18\">Build saved...</span>\r\n                <div className=\"build-left-container\">\r\n                    <div className=\"build-buttons-container\">\r\n                        <span id=\"saveBuildButton\" className=\"button-01 border-04\" onClick={saveBuild.bind(this)}>Save Build</span>\r\n                    </div>                    \r\n                    <HeroSelect careerId={state.careerId}></HeroSelect>\r\n                </div>\r\n                <div className=\"build-main-container\">\r\n                    <Tabs>\r\n                        <TabList>\r\n                            <Tab>Summary</Tab>\r\n                            <Tab>Videos</Tab>\r\n                            <Tab>Combos</Tab>                        \r\n                        </TabList>\r\n                        <TabPanel className=\"build-summary-tab\">\r\n                            <div className=\"build-details-container\">\r\n                                <HeroDetails careerId={state.careerId}></HeroDetails>\r\n                                <input type=\"text\" className=\"build-name-input border-02 background-18\" placeholder=\"Name your build\" value={state.name} onChange={handleNameChange.bind(this)}></input>\r\n                                <textarea className=\"input-build-description border-02 background-18\" wrap=\"hard\" placeholder=\"Describe your build\" value={state.description} onChange={handleDescriptionChanged.bind(this)}></textarea>\r\n                                <BuildInformation></BuildInformation>\r\n                                <BuildOptions></BuildOptions>\r\n                            </div>\r\n                            <BuildSummary></BuildSummary>\r\n                        </TabPanel>\r\n                        <TabPanel>\r\n                            <div className=\"build-additional-info\">\r\n                            </div>\r\n                        </TabPanel>\r\n                        <TabPanel>\r\n                            <div className=\"hero-abilities\">\r\n                            </div>                        \r\n                        </TabPanel>\r\n                    </Tabs>\r\n                    <div className=\"build-talents-container\">\r\n                        <HeroTalents contextActionType=\"UPDATE_TALENTS\" careerId={state.careerId} talents={state.talents}></HeroTalents>\r\n                    </div>\r\n                </div>\r\n                <div className=\"build-right-container\">\r\n                    <Inventory></Inventory>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\nexport default EditBuildPage;"]},"metadata":{},"sourceType":"module"}