{"ast":null,"code":"var _jsxFileName = \"C:\\\\dev\\\\New folder\\\\rg\\\\src\\\\stores\\\\BuildPageStore.js\";\nimport React from 'react';\nimport { AppContext } from './Store';\nimport { PatchList } from '../data/PatchList';\nimport { DataHelper } from '../utils/DataHelper';\nconst BuildPageContext = React.createContext();\nexport { BuildPageContext };\n\nfunction buildPageReducer(state, action) {\n  console.log('build page reducer');\n  console.log(action);\n\n  switch (action.type) {\n    case 'INIT_STATE_FROM_DATA':\n      var build = action.payload.data();\n      var buildId = action.payload.id;\n      var dateModified = new Date(build.dateModified.seconds * 1000);\n      var filteredPatchList = PatchList.filter(patch => {\n        return patch.date < dateModified;\n      }); // TODO - Confirm patch is first patch before date modified\n\n      var patch = filteredPatchList[filteredPatchList.length - 1].number;\n      return { ...state,\n        buildId: buildId,\n        careerId: build.careerId,\n        primaryWeaponId: build.primaryWeapon.id,\n        secondaryWeaponId: build.secondaryWeapon.id,\n        talents: [build.talent1, build.talent2, build.talent3, build.talent4, build.talent5, build.talent6],\n        properties: [build.primaryWeapon.property1Id, build.primaryWeapon.property2Id, build.secondaryWeapon.property1Id, build.secondaryWeapon.property2Id, build.necklace.property1Id, build.necklace.property2Id, build.charm.property1Id, build.charm.property2Id, build.trinket.property1Id, build.trinket.property2Id],\n        traits: [build.primaryWeapon.traitId, build.secondaryWeapon.traitId, build.necklace.traitId, build.charm.traitId, build.trinket.traitId],\n        name: build.name,\n        description: build.description,\n        difficulties: DataHelper.getDifficultiesByIds(build.difficulties),\n        missions: DataHelper.getMissionsByIds(build.missions),\n        potions: DataHelper.getPotionsByIds(build.potions),\n        roles: DataHelper.getRolesByIds(build.roles),\n        books: DataHelper.getBooksByIds(build.books),\n        likes: build.likes,\n        likeCount: build.likeCount,\n        patch: patch,\n        userId: build.userId,\n        username: build.username,\n        videos: build.videos,\n        dirty: false,\n        isFromDb: true,\n        createBuild: false,\n        isLiked: false\n      };\n\n    case 'UPDATE_PROPERTY_SELECT':\n      var newProperties = { ...state.properties\n      };\n      newProperties[action.payload.index] = parseInt(action.payload.id);\n      return { ...state,\n        properties: newProperties,\n        dirty: true\n      };\n\n    case 'UPDATE_TRAIT_SELECT':\n      var newTraits = { ...state.traits\n      };\n      newTraits[action.payload.index] = parseInt(action.payload.id);\n      return { ...state,\n        traits: newTraits,\n        dirty: true\n      };\n\n    case 'UPDATE_CAREER':\n      return { ...state,\n        careerId: parseInt(action.payload),\n        dirty: true\n      };\n\n    case 'UPDATE_TALENTS':\n      var newTalents = { ...state.talents\n      };\n      newTalents[action.payload.tier - 1] = parseInt(action.payload.talent);\n      return { ...state,\n        talents: newTalents,\n        dirty: true\n      };\n\n    case 'UPDATE_ITEM_SELECT':\n      switch (action.payload.type) {\n        case 'primary':\n          return { ...state,\n            primaryWeaponId: parseInt(action.payload.id),\n            dirty: true\n          };\n\n        case 'secondary':\n          return { ...state,\n            secondaryWeaponId: parseInt(action.payload.id),\n            dirty: true\n          };\n\n        case 'necklace':\n          var necklace = { ...state.necklace\n          };\n          necklace.id = parseInt(action.payload.id);\n          return { ...state,\n            necklace: necklace,\n            dirty: true\n          };\n\n        case 'charm':\n          var charm = { ...state.charm\n          };\n          charm.id = parseInt(action.payload.id);\n          return { ...state,\n            charm: charm,\n            dirty: true\n          };\n\n        case 'trinket':\n          var trinket = { ...state.trinket\n          };\n          trinket.id = parseInt(action.payload.id);\n          return { ...state,\n            trinket: trinket,\n            dirty: true\n          };\n\n        default:\n          throw new Error('Error updating Hero Page state.');\n      }\n\n    case 'UPDATE_DIFFICULTY':\n      return { ...state,\n        difficulties: action.payload,\n        dirty: true\n      };\n\n    case 'UPDATE_MISSION':\n      return { ...state,\n        missions: action.payload,\n        dirty: true\n      };\n\n    case 'UPDATE_BOOKS':\n      return { ...state,\n        books: action.payload,\n        dirty: true\n      };\n\n    case 'UPDATE_POTION':\n      return { ...state,\n        potions: action.payload,\n        dirty: true\n      };\n\n    case 'UPDATE_ROLES':\n      return { ...state,\n        roles: action.payload,\n        dirty: true\n      };\n\n    case 'UPDATE_DESCRIPTION':\n      return { ...state,\n        description: action.payload,\n        dirty: true\n      };\n\n    case 'UPDATE_NAME':\n      return { ...state,\n        name: action.payload,\n        dirty: true\n      };\n\n    case 'UPDATE_DIRTY':\n      return { ...state,\n        dirty: action.payload\n      };\n\n    case 'UPDATE_LIKES':\n      return { ...state,\n        likes: action.payload.likes,\n        likeCount: action.payload.likeCount,\n        isLiked: action.payload.isLikedByUser\n      };\n\n    case 'UPDATE_READONLY':\n      return { ...state,\n        readonly: action.payload\n      };\n\n    case 'UPDATE_SIMILAR_BUILDS':\n      return { ...state,\n        similarBuilds: action.payload\n      };\n\n    case 'UPDATE_USER_BUILDS':\n      return { ...state,\n        userBuilds: action.payload\n      };\n\n    case 'UPDATE_CREATE_BUILD_STATE':\n      return { ...state,\n        createBuild: action.payload,\n        readonly: !action.payload\n      };\n\n    case 'UPDATE_AUTHOR':\n      return { ...state,\n        createBuild: action.payload,\n        readonly: !action.payload\n      };\n\n    case 'UPDATE_USER_LIKE':\n      return { ...state,\n        isLiked: action.payload\n      };\n\n    case 'ADD_USER_LIKE':\n      return { ...state,\n        isLiked: true\n      };\n\n    case 'REMOVE_USER_LIKE':\n      return { ...state,\n        isLiked: false\n      };\n\n    default:\n      throw new Error('Error updating Build Page state.');\n  }\n}\n\nexport default function BuildPageStore(props) {\n  const stateHook = React.useReducer(buildPageReducer, {\n    buildId: 0,\n    careerId: 1,\n    primaryWeaponId: 14,\n    secondaryWeaponId: 11,\n    talents: [0, 0, 0, 0, 0, 0],\n    properties: [1, 2, 1, 2, 1, 2, 1, 2, 1, 2],\n    propertyValues: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    traits: [1, 1, 1, 1, 1],\n    name: '',\n    description: '',\n    difficulties: [],\n    missions: [],\n    potions: [],\n    roles: [],\n    likes: [],\n    books: [],\n    patch: '',\n    userId: '',\n    username: '',\n    videos: [],\n    dirty: false,\n    readonly: true,\n    similarBuilds: [],\n    similarBuildsLastDocument: {},\n    similarBuildsCurrentPage: 0,\n    similarBuildsCount: 0,\n    userBuilds: [],\n    userBuildsLastDocument: {},\n    userBuildsCurrentPage: 0,\n    userBuildsCount: 0,\n    isFromDb: false,\n    createBuild: false,\n    isLiked: false\n  });\n  return /*#__PURE__*/React.createElement(AppContext.Provider, {\n    value: stateHook,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }, props.children);\n}","map":{"version":3,"sources":["C:/dev/New folder/rg/src/stores/BuildPageStore.js"],"names":["React","AppContext","PatchList","DataHelper","BuildPageContext","createContext","buildPageReducer","state","action","console","log","type","build","payload","data","buildId","id","dateModified","Date","seconds","filteredPatchList","filter","patch","date","length","number","careerId","primaryWeaponId","primaryWeapon","secondaryWeaponId","secondaryWeapon","talents","talent1","talent2","talent3","talent4","talent5","talent6","properties","property1Id","property2Id","necklace","charm","trinket","traits","traitId","name","description","difficulties","getDifficultiesByIds","missions","getMissionsByIds","potions","getPotionsByIds","roles","getRolesByIds","books","getBooksByIds","likes","likeCount","userId","username","videos","dirty","isFromDb","createBuild","isLiked","newProperties","index","parseInt","newTraits","newTalents","tier","talent","Error","isLikedByUser","readonly","similarBuilds","userBuilds","BuildPageStore","props","stateHook","useReducer","propertyValues","similarBuildsLastDocument","similarBuildsCurrentPage","similarBuildsCount","userBuildsLastDocument","userBuildsCurrentPage","userBuildsCount","children"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { AppContext } from './Store';\r\nimport { PatchList } from '../data/PatchList';\r\nimport { DataHelper } from '../utils/DataHelper';\r\n\r\nconst BuildPageContext = React.createContext();\r\n\r\nexport {BuildPageContext}\r\n\r\nfunction buildPageReducer(state, action) {\r\n    console.log('build page reducer');\r\n    console.log(action);\r\n\r\n    switch(action.type) {\r\n        case 'INIT_STATE_FROM_DATA':\r\n            var build = action.payload.data();\r\n            var buildId = action.payload.id;\r\n            var dateModified = new Date(build.dateModified.seconds * 1000);\r\n\r\n            var filteredPatchList = PatchList.filter((patch) => {\r\n                return patch.date < dateModified;\r\n            });\r\n\r\n            \r\n            // TODO - Confirm patch is first patch before date modified\r\n            var patch = filteredPatchList[filteredPatchList.length - 1].number;\r\n\r\n            return {...state,\r\n                buildId: buildId,\r\n                careerId: build.careerId,\r\n                primaryWeaponId: build.primaryWeapon.id,\r\n                secondaryWeaponId: build.secondaryWeapon.id,\r\n                talents: [\r\n                    build.talent1,\r\n                    build.talent2,\r\n                    build.talent3,\r\n                    build.talent4,\r\n                    build.talent5,\r\n                    build.talent6\r\n                ],\r\n                properties: [\r\n                    build.primaryWeapon.property1Id,\r\n                    build.primaryWeapon.property2Id,\r\n                    build.secondaryWeapon.property1Id,\r\n                    build.secondaryWeapon.property2Id,\r\n                    build.necklace.property1Id,\r\n                    build.necklace.property2Id,\r\n                    build.charm.property1Id,\r\n                    build.charm.property2Id,\r\n                    build.trinket.property1Id,\r\n                    build.trinket.property2Id\r\n                ],\r\n                traits: [\r\n                    build.primaryWeapon.traitId,\r\n                    build.secondaryWeapon.traitId,\r\n                    build.necklace.traitId,\r\n                    build.charm.traitId,\r\n                    build.trinket.traitId\r\n                ],\r\n                name: build.name,\r\n                description: build.description,\r\n                difficulties: DataHelper.getDifficultiesByIds(build.difficulties),\r\n                missions: DataHelper.getMissionsByIds(build.missions),\r\n                potions: DataHelper.getPotionsByIds(build.potions),\r\n                roles: DataHelper.getRolesByIds(build.roles),\r\n                books: DataHelper.getBooksByIds(build.books),\r\n                likes: build.likes,\r\n                likeCount: build.likeCount,\r\n                patch: patch,\r\n                userId: build.userId,\r\n                username: build.username,\r\n                videos: build.videos,\r\n                dirty: false,\r\n                isFromDb: true,\r\n                createBuild: false,\r\n                isLiked: false\r\n            };\r\n        case 'UPDATE_PROPERTY_SELECT':\r\n            var newProperties = {...state.properties};\r\n            newProperties[action.payload.index] = parseInt(action.payload.id);\r\n            return {...state, properties: newProperties, dirty: true}\r\n        case 'UPDATE_TRAIT_SELECT':\r\n            var newTraits = {...state.traits};\r\n            newTraits[action.payload.index] = parseInt(action.payload.id);\r\n            return {...state, traits: newTraits, dirty: true}\r\n        case 'UPDATE_CAREER':\r\n            return {...state, careerId: parseInt(action.payload), dirty: true};\r\n        case 'UPDATE_TALENTS':\r\n            var newTalents = {...state.talents};\r\n            newTalents[action.payload.tier-1] = parseInt(action.payload.talent);\r\n            return {...state, talents: newTalents, dirty: true};\r\n        case 'UPDATE_ITEM_SELECT':\r\n            switch (action.payload.type) {\r\n                case 'primary':\r\n                    return {...state, primaryWeaponId: parseInt(action.payload.id), dirty: true};\r\n                case 'secondary':\r\n                    return {...state, secondaryWeaponId: parseInt(action.payload.id), dirty: true};\r\n                case 'necklace':\r\n                    var necklace = {...state.necklace};\r\n                    necklace.id = parseInt(action.payload.id);\r\n                    return {...state, necklace: necklace, dirty: true};\r\n                case 'charm':\r\n                    var charm = {...state.charm};\r\n                    charm.id = parseInt(action.payload.id);\r\n                    return {...state, charm: charm, dirty: true};\r\n                case 'trinket':\r\n                    var trinket = {...state.trinket};\r\n                    trinket.id = parseInt(action.payload.id);\r\n                    return {...state, trinket: trinket, dirty: true};\r\n                default:\r\n                    throw new Error('Error updating Hero Page state.');\r\n            }\r\n        case 'UPDATE_DIFFICULTY':\r\n            return {...state, difficulties: action.payload, dirty: true};\r\n        case 'UPDATE_MISSION':\r\n            return {...state, missions: action.payload, dirty: true};\r\n        case 'UPDATE_BOOKS':\r\n            return {...state, books: action.payload, dirty: true};\r\n        case 'UPDATE_POTION':\r\n            return {...state, potions: action.payload, dirty: true};\r\n        case 'UPDATE_ROLES':\r\n            return {...state, roles: action.payload, dirty: true};\r\n        case 'UPDATE_DESCRIPTION':\r\n            return {...state, description: action.payload, dirty: true};\r\n        case 'UPDATE_NAME':\r\n            return {...state, name: action.payload, dirty: true};\r\n        case 'UPDATE_DIRTY':\r\n            return {...state, dirty: action.payload};\r\n        case 'UPDATE_LIKES':\r\n            return {...state, likes: action.payload.likes, likeCount: action.payload.likeCount, isLiked: action.payload.isLikedByUser};\r\n        case 'UPDATE_READONLY':\r\n            return {...state, readonly: action.payload};\r\n        case 'UPDATE_SIMILAR_BUILDS':\r\n            return {...state, similarBuilds: action.payload};\r\n        case 'UPDATE_USER_BUILDS':\r\n            return {...state, userBuilds: action.payload};\r\n        case 'UPDATE_CREATE_BUILD_STATE':\r\n            return {...state, createBuild: action.payload, readonly: !action.payload};\r\n        case 'UPDATE_AUTHOR':\r\n            return {...state, createBuild: action.payload, readonly: !action.payload};\r\n        case 'UPDATE_USER_LIKE':\r\n            return {...state, isLiked: action.payload};\r\n        case 'ADD_USER_LIKE':\r\n            return {...state, isLiked: true};\r\n        case 'REMOVE_USER_LIKE':\r\n            return {...state, isLiked: false};\r\n        default:\r\n            throw new Error('Error updating Build Page state.');\r\n    }\r\n}\r\n\r\nexport default function BuildPageStore(props) {\r\n    const stateHook = React.useReducer(buildPageReducer, {\r\n        buildId: 0,\r\n        careerId: 1,\r\n        primaryWeaponId: 14,\r\n        secondaryWeaponId: 11,\r\n        talents: [0,0,0,0,0,0],\r\n        properties: [1,2,1,2,1,2,1,2,1,2],\r\n        propertyValues: [0,0,0,0,0,0,0,0,0,0],\r\n        traits: [1,1,1,1,1],\r\n        name: '',\r\n        description: '',\r\n        difficulties: [],\r\n        missions: [],\r\n        potions: [],\r\n        roles: [],\r\n        likes: [],\r\n        books: [],\r\n        patch: '',\r\n        userId: '',\r\n        username: '',\r\n        videos: [],\r\n        dirty: false,\r\n        readonly: true,\r\n        similarBuilds: [],\r\n        similarBuildsLastDocument: {},\r\n        similarBuildsCurrentPage: 0,\r\n        similarBuildsCount: 0,\r\n        userBuilds: [],\r\n        userBuildsLastDocument: {},\r\n        userBuildsCurrentPage: 0,\r\n        userBuildsCount: 0,\r\n        isFromDb: false,\r\n        createBuild: false,\r\n        isLiked: false\r\n    });\r\n\r\n    return (\r\n        <AppContext.Provider value={stateHook}>\r\n            {props.children}\r\n        </AppContext.Provider>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}